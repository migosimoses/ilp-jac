<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Learning Platform - Jaseci</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #666;
            font-size: 16px;
        }
        
        .layout {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 20px;
        }
        
        .sidebar {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            height: fit-content;
        }
        
        .sidebar h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .nav-item {
            padding: 12px;
            margin-bottom: 8px;
            background: #f5f5f5;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .nav-item:hover {
            background: #667eea;
            color: white;
        }
        
        .nav-item.active {
            background: #667eea;
            color: white;
            font-weight: bold;
        }
        
        .content {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }
        
        h2 {
            color: #667eea;
            margin-bottom: 20px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }
        
        .lesson-content {
            line-height: 1.8;
            color: #333;
        }
        
        .lesson-content p {
            margin-bottom: 15px;
        }
        
        .lesson-content ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        .lesson-content li {
            margin-bottom: 8px;
        }
        
        .code-block {
            background: #f5f5f5;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5568d3;
        }
        
        .btn-secondary {
            background: #e0e0e0;
            color: #333;
        }
        
        .btn-secondary:hover {
            background: #d0d0d0;
        }
        
        .quiz-question {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .quiz-option {
            padding: 12px;
            margin: 10px 0;
            border: 2px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .quiz-option:hover {
            border-color: #667eea;
            background: #f5f7ff;
        }
        
        .quiz-option input[type="radio"] {
            margin-right: 10px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .skill-item {
            padding: 15px;
            background: #f5f5f5;
            border-radius: 6px;
            margin-bottom: 15px;
        }
        
        .skill-name {
            font-weight: bold;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
        }
        
        .mastery-bar {
            width: 100%;
            height: 20px;
            background: #ddd;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .mastery-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
        }
        
        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        
        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        
        @media (max-width: 768px) {
            .layout {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 10px;
            }
            
            .nav-item {
                margin-bottom: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üéì Interactive Learning Platform for Jaseci</h1>
            <p class="subtitle">Learn Jac and Jaseci with adaptive lessons, AI-powered quizzes, and personalized recommendations</p>
        </header>
        
        <div class="layout">
            <div class="sidebar">
                <h3>üìö Navigation</h3>
                <div class="nav-item active" onclick="showSection('dashboard')">Dashboard</div>
                <div class="nav-item" onclick="showSection('lessons')">Lessons</div>
                <div class="nav-item" onclick="showSection('quiz')">Take Quiz</div>
                <div class="nav-item" onclick="showSection('progress')">Progress</div>
                <div class="nav-item" onclick="showSection('skillmap')">Skill Map</div>
            </div>
            
            <div class="content">
                <!-- Dashboard Section -->
                <div id="dashboard" class="section active">
                    <h2>üìä Welcome to Your Learning Dashboard</h2>
                    <p style="margin-bottom: 20px;">Welcome! Start your journey learning Jac and Jaseci with our adaptive learning platform.</p>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value">0</div>
                            <div class="stat-label">Lessons Completed</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">0%</div>
                            <div class="stat-label">Overall Progress</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">0</div>
                            <div class="stat-label">Quizzes Taken</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">0h</div>
                            <div class="stat-label">Time Invested</div>
                        </div>
                    </div>
                    
                    <h3 style="color: #667eea; margin-top: 30px; margin-bottom: 15px;">üöÄ Getting Started</h3>
                    <div class="lesson-content">
                        <p>This platform helps you learn Jac through:</p>
                        <ul>
                            <li><strong>Interactive Lessons</strong> - Structured content on Jac fundamentals, walkers, OSP, and byLLM</li>
                            <li><strong>AI-Generated Quizzes</strong> - Questions automatically created from lessons</li>
                            <li><strong>Intelligent Assessment</strong> - LLM evaluates your answers in real-time</li>
                            <li><strong>Progress Tracking</strong> - See your mastery levels and weak areas</li>
                            <li><strong>Personalized Recommendations</strong> - Suggested lessons based on your progress</li>
                        </ul>
                    </div>
                    
                    <div class="button-group">
                        <button class="btn-primary" onclick="showSection('lessons')">Browse Lessons</button>
                        <button class="btn-secondary" onclick="showSection('quiz')">Take a Quiz</button>
                    </div>
                </div>
                
                <!-- Lessons List -->
                <div id="lessons" class="section">
                    <h2>üìö Available Lessons</h2>
                    <p style="color: #666; margin-bottom: 20px;">Choose a lesson to get started with learning Jac and Jaseci</p>
                    <div id="lessons-list" class="lesson-content"></div>
                </div>
                
                <!-- Individual Lesson Detail -->
                <div id="lesson-detail" class="section"></div>
                
                <!-- Quiz Section - List all quizzes -->
                <div id="quiz" class="section">
                    <h2>üéØ Available Quizzes</h2>
                    <p style="color: #666; margin-bottom: 20px;">Test your knowledge with these quizzes</p>
                    <div id="quizzes-list" class="lesson-content"></div>
                </div>
                
                <!-- Individual Quiz Detail -->
                <div id="quiz-detail" class="section"></div>
                
                <!-- Progress Section -->
                <div id="progress" class="section">
                    <h2>üìà Your Progress</h2>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="lessonsCompleted">0/5</div>
                            <div class="stat-label">Lessons Completed</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="overallProgress">0%</div>
                            <div class="stat-label">Overall Progress</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="quizzesTaken">0</div>
                            <div class="stat-label">Quizzes Taken</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="timeInvested">0h</div>
                            <div class="stat-label">Time Invested</div>
                        </div>
                    </div>
                    
                    <h3 style="color: #667eea; margin-top: 30px; margin-bottom: 15px;">Learning Areas</h3>
                    <div class="skill-item">
                        <div class="skill-name">
                            <span>Jac Basics</span>
                            <span>0%</span>
                        </div>
                        <div class="mastery-bar">
                            <div class="mastery-fill" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="skill-item">
                        <div class="skill-name">
                            <span>Nodes & Edges</span>
                            <span>0%</span>
                        </div>
                        <div class="mastery-bar">
                            <div class="mastery-fill" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="skill-item">
                        <div class="skill-name">
                            <span>Walkers</span>
                            <span>0%</span>
                        </div>
                        <div class="mastery-bar">
                            <div class="mastery-fill" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Skill Map Section -->
                <div id="skillmap" class="section">
                    <h2>üó∫Ô∏è Your Skill Map</h2>
                    <p style="margin-bottom: 20px;">Visual representation of your mastery across Jac and Jaseci concepts.</p>
                    
                    <h3 style="color: #667eea; margin-top: 20px; margin-bottom: 15px;">Core Concepts</h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                        <div style="padding: 15px; background: #e8e8e8; border-radius: 8px; text-align: center;">
                            <div style="font-weight: bold; margin-bottom: 10px;">Nodes</div>
                            <div class="mastery-bar" style="margin-bottom: 8px;">
                                <div class="mastery-fill" style="width: 0%"></div>
                            </div>
                            <div style="font-size: 12px; color: #666;">0% Mastered</div>
                        </div>
                        
                        <div style="padding: 15px; background: #e8e8e8; border-radius: 8px; text-align: center;">
                            <div style="font-weight: bold; margin-bottom: 10px;">Edges</div>
                            <div class="mastery-bar" style="margin-bottom: 8px;">
                                <div class="mastery-fill" style="width: 0%"></div>
                            </div>
                            <div style="font-size: 12px; color: #666;">0% Mastered</div>
                        </div>
                        
                        <div style="padding: 15px; background: #e8e8e8; border-radius: 8px; text-align: center;">
                            <div style="font-weight: bold; margin-bottom: 10px;">Walkers</div>
                            <div class="mastery-bar" style="margin-bottom: 8px;">
                                <div class="mastery-fill" style="width: 0%"></div>
                            </div>
                            <div style="font-size: 12px; color: #666;">0% Mastered</div>
                        </div>
                    </div>
                    
                    <h3 style="color: #667eea; margin-top: 20px; margin-bottom: 15px;">Advanced Concepts</h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                        <div style="padding: 15px; background: #f0f0f0; border-radius: 8px; text-align: center; opacity: 0.5;">
                            <div style="font-weight: bold; margin-bottom: 10px;">üîí OSP</div>
                            <div style="font-size: 12px; color: #666;">Locked</div>
                        </div>
                        
                        <div style="padding: 15px; background: #f0f0f0; border-radius: 8px; text-align: center; opacity: 0.5;">
                            <div style="font-weight: bold; margin-bottom: 10px;">üîí byLLM</div>
                            <div style="font-size: 12px; color: #666;">Locked</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        const API_URL = 'http://localhost:5000/api';
        let completedLessons = [];
        let quizzesTaken = 0;
        let allLessons = [];
        let allQuizzes = [];
        
        // Fetch all lessons from API
        async function loadLessons() {
            try {
                const response = await fetch(`${API_URL}/lessons`);
                const data = await response.json();
                allLessons = data.lessons || [];
                renderLessonsList();
            } catch (error) {
                console.error('Error loading lessons:', error);
            }
        }
        
        // Fetch all quizzes from API
        async function loadQuizzes() {
            try {
                const response = await fetch(`${API_URL}/quizzes`);
                const data = await response.json();
                allQuizzes = data.quizzes || [];
                renderQuizzesList();
            } catch (error) {
                console.error('Error loading quizzes:', error);
            }
        }
        
        // Render quizzes list
        function renderQuizzesList() {
            const quizzesContainer = document.getElementById('quizzes-list');
            if (!quizzesContainer) return;
            
            quizzesContainer.innerHTML = '';
            
            allQuizzes.forEach(quiz => {
                const quizDiv = document.createElement('div');
                quizDiv.style.cssText = 'padding: 15px; background: #f5f5f5; border-radius: 6px; margin-bottom: 15px;';
                quizDiv.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong style="color: #667eea;">${quiz.title}</strong><br>
                            <small style="color: #666;">${quiz.difficulty.charAt(0).toUpperCase() + quiz.difficulty.slice(1)} ‚Ä¢ ${quiz.questionCount} questions</small>
                        </div>
                        <button class="btn-primary" onclick="viewQuiz('${quiz.quizId}')">Take Quiz</button>
                    </div>
                `;
                quizzesContainer.appendChild(quizDiv);
            });
        }
        
        // Store current quiz data for evaluation
        let currentQuiz = null;
        
        // View a specific quiz
        async function viewQuiz(quizId) {
            try {
                const response = await fetch(`${API_URL}/quizzes/${quizId}`);
                const quiz = await response.json();
                currentQuiz = quiz; // Store for later evaluation
                
                const quizContainer = document.getElementById('quiz-detail');
                if (!quizContainer) return;
                
                let questionsHtml = '';
                quiz.questions.forEach((question, index) => {
                    questionsHtml += `
                        <div class="quiz-question" id="question-${index}">
                            <strong>Question ${index + 1}: ${question.questionText}</strong>
                            <div style="margin-top: 15px;">
                    `;
                    
                    if (question.questionType === 'multiple_choice') {
                        question.options.forEach((option, optIndex) => {
                            questionsHtml += `
                                <label class="quiz-option">
                                    <input type="radio" name="q${index}" value="${option}"> ${option}
                                </label>
                            `;
                        });
                    } else if (question.questionType === 'true_false') {
                        questionsHtml += `
                            <label class="quiz-option">
                                <input type="radio" name="q${index}" value="True"> True
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q${index}" value="False"> False
                            </label>
                        `;
                    } else if (question.questionType === 'free_text') {
                        questionsHtml += `
                            <textarea name="q${index}" rows="4" style="width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #ddd;"></textarea>
                        `;
                    } else if (question.questionType === 'code') {
                        questionsHtml += `
                            <textarea name="q${index}" rows="8" style="width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #ddd; font-family: monospace;">${question.starterCode || ''}</textarea>
                        `;
                    }
                    
                    questionsHtml += `
                            </div>
                            <div id="feedback-${index}" style="margin-top: 10px;"></div>
                        </div>
                    `;
                });
                
                quizContainer.innerHTML = `
                    <h2>${quiz.title}</h2>
                    <p style="color: #666; margin-bottom: 20px;">Difficulty: ${quiz.difficulty}</p>
                    <div id="quiz-questions-container">${questionsHtml}</div>
                    <div id="quiz-result" style="margin-top: 30px;"></div>
                    <div class="button-group" style="margin-top: 30px;">
                        <button class="btn-secondary" onclick="showSection('quiz')">Back to Quizzes</button>
                        <button class="btn-primary" onclick="submitQuizAnswers('${quizId}')">Submit Answers</button>
                    </div>
                `;
                
                showSection('quiz-detail');
            } catch (error) {
                console.error('Error loading quiz:', error);
            }
        }
        
        // Submit quiz answers and show score
        function submitQuizAnswers(quizId) {
            if (!currentQuiz) {
                alert('Quiz data not loaded');
                return;
            }
            
            let correctCount = 0;
            let totalQuestions = currentQuiz.questions.length;
            const questionsContainer = document.getElementById('quiz-questions-container');
            
            // Evaluate each question
            currentQuiz.questions.forEach((question, index) => {
                const feedbackDiv = document.getElementById(`feedback-${index}`);
                let userAnswer = null;
                let isCorrect = false;
                
                if (question.questionType === 'multiple_choice') {
                    const selected = questionsContainer.querySelector(`input[name="q${index}"]:checked`);
                    if (selected) {
                        userAnswer = selected.value;
                        // Direct string comparison for multiple choice
                        isCorrect = userAnswer === question.correctAnswer;
                    }
                } else if (question.questionType === 'true_false') {
                    const selected = questionsContainer.querySelector(`input[name="q${index}"]:checked`);
                    if (selected) {
                        userAnswer = selected.value;
                        // Convert both to strings for comparison (handles boolean from API)
                        const correctAnswerStr = String(question.correctAnswer).charAt(0).toUpperCase() + String(question.correctAnswer).slice(1);
                        isCorrect = userAnswer === correctAnswerStr;
                    }
                } else if (question.questionType === 'free_text') {
                    const textarea = questionsContainer.querySelector(`textarea[name="q${index}"]`);
                    if (textarea) {
                        userAnswer = textarea.value.toLowerCase();
                        // Check if answer contains any of the keywords
                        const keywords = question.keywords || [];
                        isCorrect = keywords.some(keyword => userAnswer.includes(keyword.toLowerCase()));
                    }
                } else if (question.questionType === 'code') {
                    const textarea = questionsContainer.querySelector(`textarea[name="q${index}"]`);
                    if (textarea) {
                        userAnswer = textarea.value;
                        // For code questions, give credit if they wrote something substantial
                        isCorrect = userAnswer && userAnswer.length > 20;
                    }
                }
                
                if (isCorrect) {
                    correctCount++;
                    feedbackDiv.innerHTML = '<div style="color: #28a745; padding: 10px; background: #d4edda; border-radius: 4px;">‚úì Correct!</div>';
                } else {
                    let correctAnswerText = '';
                    if (question.questionType === 'multiple_choice' || question.questionType === 'true_false') {
                        correctAnswerText = `Correct answer: ${question.correctAnswer}`;
                    }
                    feedbackDiv.innerHTML = `<div style="color: #dc3545; padding: 10px; background: #f8d7da; border-radius: 4px;">‚úó Incorrect. ${correctAnswerText}</div>`;
                }
            });
            
            // Calculate score
            const score = Math.round((correctCount / totalQuestions) * 100);
            const passed = score >= 70;
            
            // Display result
            const resultDiv = document.getElementById('quiz-result');
            resultDiv.innerHTML = `
                <div style="background: ${passed ? '#d4edda' : '#fff3cd'}; border: 2px solid ${passed ? '#28a745' : '#ffc107'}; border-radius: 8px; padding: 20px; text-align: center;">
                    <h3 style="color: ${passed ? '#28a745' : '#856404'}; margin-bottom: 10px;">
                        ${passed ? 'üéâ Congratulations!' : 'üìö Keep Learning!'}
                    </h3>
                    <div style="font-size: 48px; font-weight: bold; color: ${passed ? '#28a745' : '#856404'}; margin: 20px 0;">
                        ${score}%
                    </div>
                    <div style="font-size: 18px; color: #666; margin-bottom: 10px;">
                        You answered ${correctCount} out of ${totalQuestions} questions correctly
                    </div>
                    ${passed ? 
                        '<div style="color: #28a745;">You passed this quiz! Great job! üéØ</div>' : 
                        '<div style="color: #856404;">Score 70% or higher to pass. Try again!</div>'
                    }
                </div>
            `;
            
            // Scroll to results
            resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            
            // Update progress
            quizzesTaken++;
            updateProgress();
        }
        
        // Render lessons dynamically
        function renderLessonsList() {
            const lessonsContainer = document.getElementById('lessons-list');
            if (!lessonsContainer) return;
            
            lessonsContainer.innerHTML = '';
            
            allLessons.forEach(lesson => {
                const lessonDiv = document.createElement('div');
                lessonDiv.style.cssText = 'padding: 15px; background: #f5f5f5; border-radius: 6px; margin-bottom: 15px;';
                lessonDiv.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong style="color: #667eea;">${lesson.title}</strong><br>
                            <small style="color: #666;">${lesson.difficulty.charAt(0).toUpperCase() + lesson.difficulty.slice(1)} ‚Ä¢ ${lesson.durationMinutes} minutes</small>
                        </div>
                        <button class="btn-primary" onclick="viewLesson('${lesson.lessonId}')">Start</button>
                    </div>
                `;
                lessonsContainer.appendChild(lessonDiv);
            });
        }
        
        // View a specific lesson
        async function viewLesson(lessonId) {
            try {
                const response = await fetch(`${API_URL}/lessons/${lessonId}`);
                const lesson = await response.json();
                
                const lessonContainer = document.getElementById('lesson-detail');
                if (!lessonContainer) return;
                
                let sectionsHtml = '';
                lesson.sections.forEach(section => {
                    sectionsHtml += `
                        <h3 style="color: #667eea; margin-top: 20px; margin-bottom: 10px;">${section.sectionTitle}</h3>
                        <div class="lesson-content">${section.body}</div>
                    `;
                    if (section.codeExample) {
                        sectionsHtml += `<div class="code-block">${section.codeExample}</div>`;
                    }
                });
                
                lessonContainer.innerHTML = `
                    <h2>${lesson.title}</h2>
                    <p style="color: #666; margin-bottom: 20px;">${lesson.description}</p>
                    <div style="background: #e8f1ff; padding: 15px; border-radius: 6px; margin-bottom: 20px;">
                        <strong>Difficulty:</strong> ${lesson.difficulty} | <strong>Duration:</strong> ${lesson.durationMinutes} minutes
                    </div>
                    <div>${sectionsHtml}</div>
                    <div class="button-group" style="margin-top: 30px;">
                        <button class="btn-primary" onclick="completeLesson('${lessonId}', '${lesson.title}')">Mark as Complete</button>
                        <button class="btn-secondary" onclick="showSection('lessons')">Back to Lessons</button>
                    </div>
                `;
                
                showSection('lesson-detail');
            } catch (error) {
                console.error('Error loading lesson:', error);
            }
        }
        
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            const section = document.getElementById(sectionId);
            if (section) {
                section.classList.add('active');
            }
            
            // Load quizzes if showing quiz section
            if (sectionId === 'quiz' && allQuizzes.length === 0) {
                loadQuizzes();
            }
            
            // Update nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Find and highlight the correct nav item
            document.querySelectorAll('.nav-item').forEach(item => {
                if (item.textContent.toLowerCase().includes(sectionId.replace('-', ' '))) {
                    item.classList.add('active');
                }
            });
            
            // Special case for dashboard
            if (sectionId === 'dashboard') {
                document.querySelectorAll('.nav-item')[0].classList.add('active');
            }
        }
        
        function completeLesson(lessonId, lessonTitle) {
            if (!completedLessons.includes(lessonId)) {
                completedLessons.push(lessonId);
                updateProgress();
                alert(`Completed "${lessonTitle}"! Great job! üéâ`);
                showSection('lessons');
            } else {
                alert('You already completed this lesson!');
            }
        }
        
        function submitQuiz() {
            const q1 = document.querySelector('input[name="q1"]:checked');
            const q2 = document.querySelector('input[name="q2"]:checked');
            
            if (!q1 || !q2) {
                alert('Please answer all questions');
                return;
            }
            
            let score = 0;
            if (q1.value === 'a') score += 50;
            if (q2.value === 'true') score += 50;
            
            quizzesTaken++;
            updateProgress();
            
            alert(`Quiz submitted! Your score: ${score}% üéØ`);
            showSection('progress');
        }
        
        function updateProgress() {
            const progress = (completedLessons.length / allLessons.length) * 100;
            document.getElementById('lessonsCompleted').textContent = completedLessons.length + '/' + allLessons.length;
            document.getElementById('overallProgress').textContent = Math.round(progress) + '%';
            document.getElementById('quizzesTaken').textContent = quizzesTaken;
            
            // Update mastery bars in progress section
            const masteryPercentage = (completedLessons.length / Math.max(allLessons.length, 3)) * 100;
            document.querySelectorAll('.mastery-fill').forEach(fill => {
                fill.style.width = Math.min(masteryPercentage, 100) + '%';
            });
        }
        
        // Initialize the platform
        document.addEventListener('DOMContentLoaded', () => {
            loadLessons();
            loadQuizzes();
        });
    </script>
</body>
</html>
